<script>
document.write(atob('PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9InN0eWxlcy5jc3MiPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPTEyODAsIGluaXRpYWwtc2NhbGU9MS4wIj4KICAgIDxtZXRhIG5hbWU9Im1vYmlsZS13ZWItYXBwLWNhcGFibGUiIGNvbnRlbnQ9InllcyI+CiAgICA8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlIiBjb250ZW50PSJ5ZXMiPgogICAgPHRpdGxlPkdhbWJsZSBBc3Npc3Q8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIGJvZHksIGh0bWwgewogICAgICAgICAgICBjdXJzb3I6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAuY3Vyc29yIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB3aWR0aDogMjBweDsKICAgICAgICAgICAgaGVpZ2h0OiAyMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCksIHJnYmEoMjU1LCAyNTUsIDI1NSwgMCkpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgIH0KCiAgICAgICAgLnRyYWlsIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB3aWR0aDogMTBweDsKICAgICAgICAgICAgaGVpZ2h0OiAxMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNiksIHJnYmEoMjU1LCAyNTUsIDI1NSwgMCkpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgICAgICB6LWluZGV4OiA5OTk7CiAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZU91dCAwLjVzIGZvcndhcmRzOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBmYWRlT3V0IHsKICAgICAgICAgICAgdG8gewogICAgICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC41KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLnNpdGUtZm9vdGVyIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBib3R0b206IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBub25lOwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDA7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMCAxMHB4IHdoaXRlLCAwIDAgMjBweCB3aGl0ZSwgMCAwIDMwcHggd2hpdGU7CiAgICAgICAgfQoKICAgICAgICAjYmFja0J1dHRvbiB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAyMHB4OwogICAgICAgICAgICBsZWZ0OiAyMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMzBweDsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDVweCB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICB3aWR0aDogNTBweDsKICAgICAgICAgICAgaGVpZ2h0OiA1MHB4OwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHdoaXRlOwogICAgICAgIH0KCiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGEgaHJlZj0iLi4vaW5kZXguaHRtbCIgY2xhc3M9ImJhY2stYXJyb3ciPuKGkDwvYT4KICAgIDxkaXYgY2xhc3M9ImhlYWRlci1saW5rcyI+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cueW91dHViZS5jb20vQGltZW5qYXl5IiB0YXJnZXQ9Il9ibGFuayI+RW5qYXl5J3MgWW91dHViZTwvYT4KICAgICAgICA8YSBocmVmPSJodHRwczovL2Rpc2NvcmQuZ2cvZW5qYXl5IiB0YXJnZXQ9Il9ibGFuayI+RW5qYXl5J3MgRGlzY29yZDwvYT4KICAgICAgICA8YSBocmVmPSJodHRwOi8va2ljay5jb20vZW5qYXl5IiB0YXJnZXQ9Il9ibGFuayI+CiAgICAgICAgICAgIEVuamF5eSdzIEtpY2sKICAgICAgICAgICAgPHNwYW4gaWQ9ImxpdmUtc3RhdHVzLXRleHQiPkxJVkU8L3NwYW4+CiAgICAgICAgPC9hPgogICAgICAgIDxhIGhyZWY9Imh0dHA6Ly9zdGFrZS5jb20vP2M9cGVubnkiIHRhcmdldD0iX2JsYW5rIj5Db2RlIFBFTk5ZIG9uIFN0YWtlPC9hPgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJhbm5vdW5jZW1lbnQiPgogICAgICAgIDxzdHJvbmc+VXBkYXRlcyBQb3N0ZWQgaW4gRGlzY29yZDwvc3Ryb25nPgogICAgPC9kaXY+CgogICAgPGJ1dHRvbiBpZD0iYmFja0J1dHRvbiIgb25jbGljaz0id2luZG93LmxvY2F0aW9uLmhyZWY9Jy4uL2luZGV4Lmh0bWwnIj48PC9idXR0b24+CgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8aDEgY2xhc3M9ImhlYWRlciI+TWluZXMgQXNzaXN0YW50PC9oMT4KICAgICAgICA8ZGl2IGNsYXNzPSJ3cmFwcGVyIj4KICAgICAgICAgICAgPGZvcm0gaWQ9Im1pbmVzRm9ybSI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJtaW5lcyI+TnVtYmVyIG9mIE1pbmVzOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Im1pbmVzIiBuYW1lPSJtaW5lcyIgbWluPSIxIiBtYXg9IjI0IiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJkaWFtb25kcyI+TnVtYmVyIG9mIERpYW1vbmRzOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImRpYW1vbmRzIiBuYW1lPSJkaWFtb25kcyIgbWluPSIxIiBtYXg9IjI1IiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJiZXRTaXplIj5CZXQgU2l6ZTo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJiZXRTaXplIiBuYW1lPSJiZXRTaXplIiBzdGVwPSIwLjAxIiBtaW49IjAuMDEiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb3VibGVCZXQoKSI+Mng8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iaGFsdmVCZXQoKSI+MS8yPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImdlbmVyYXRlTWluZXNCb2FyZCgpIj5HZW5lcmF0ZSBNaW5lcyBCb2FyZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBpZD0icmFuZG9taXplQnV0dG9uIiBvbmNsaWNrPSJyYW5kb21pemVNaW5lc0FuZERpYW1vbmRzKCkiPlJhbmRvbWl6ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibXVsdGlwbGllci1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9Im11bHRpcGxpZXIiPk11bHRpcGxpZXI6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ibXVsdGlwbGllciIgbmFtZT0ibXVsdGlwbGllciIgc3RlcD0iMC4wMSIgbWluPSIxIiByZXF1aXJlZCBvbmlucHV0PSJ1cGRhdGVXaW5BbW91bnQoKSI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJnZW5lcmF0ZVBhdHRlcm5CdXR0b24iIG9uY2xpY2s9ImdlbmVyYXRlUGF0dGVybkJhc2VkT25NdWx0aXBsaWVyKCkiPkdlbmVyYXRlIFBhdHRlcm48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPC9mb3JtPgoKICAgICAgICAgICAgPGRpdiBpZD0ibWluZXNCb2FyZCI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9Im1pbmVzUmVzdWx0cyI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9ImN1cnNvciIgY2xhc3M9ImN1cnNvciI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGZvb3RlciBjbGFzcz0ic2l0ZS1mb290ZXIiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb290ZXItY29udGVudCI+CiAgICAgICAgICAgICAgICA8cD7CqSAyMDI0IEdhbWJsZUFzc2lzdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L3A+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZm9vdGVyPgogICAgPC9kaXY+CjxzY3JpcHQ+CiAgICAvLyBDdXJzb3IgZWZmZWN0IGFuZCBtb3ZlbWVudAogICAgY29uc3QgY3Vyc29yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnNvcicpOwoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldmVudCkgPT4gewogICAgICAgIGNvbnN0IHggPSBldmVudC5wYWdlWDsKICAgICAgICBjb25zdCB5ID0gZXZlbnQucGFnZVk7CgogICAgICAgIGN1cnNvci5zdHlsZS5sZWZ0ID0gYCR7eCAtIDEwfXB4YDsKICAgICAgICBjdXJzb3Iuc3R5bGUudG9wID0gYCR7eSAtIDEwfXB4YDsKCiAgICAgICAgY29uc3QgdHJhaWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICB0cmFpbC5jbGFzc05hbWUgPSAndHJhaWwnOwogICAgICAgIHRyYWlsLnN0eWxlLmxlZnQgPSBgJHt4IC0gNX1weGA7CiAgICAgICAgdHJhaWwuc3R5bGUudG9wID0gYCR7eSAtIDV9cHhgOwoKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRyYWlsKTsKCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRyYWlsLnJlbW92ZSgpOwogICAgICAgIH0sIDUwMCk7CiAgICB9KTsKCiAgICBmdW5jdGlvbiBmYWN0b3JpYWwobnVtYmVyKSB7CiAgICAgICAgbGV0IHZhbHVlID0gMTsKICAgICAgICBmb3IgKGxldCBpID0gbnVtYmVyOyBpID4gMTsgaS0tKSB7CiAgICAgICAgICAgIHZhbHVlICo9IGk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb21iaW5hdGlvbihuLCBkKSB7CiAgICAgICAgaWYgKG4gPT0gZCkgcmV0dXJuIDE7CiAgICAgICAgcmV0dXJuIGZhY3RvcmlhbChuKSAvIChmYWN0b3JpYWwoZCkgKiBmYWN0b3JpYWwobiAtIGQpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVSZXN1bHRzKG1pbmVzLCBkaWFtb25kcykgewogICAgICAgIGNvbnN0IHRvdGFsQ2VsbHMgPSAyNTsKICAgICAgICBjb25zdCBzYWZlQ2VsbHMgPSB0b3RhbENlbGxzIC0gbWluZXM7CiAgICAgICAgY29uc3QgZmlyc3QgPSBjb21iaW5hdGlvbih0b3RhbENlbGxzLCBkaWFtb25kcyk7CiAgICAgICAgY29uc3Qgc2Vjb25kID0gY29tYmluYXRpb24oc2FmZUNlbGxzLCBkaWFtb25kcyk7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gMC45OSAqIChmaXJzdCAvIHNlY29uZCk7CiAgICAgICAgY29uc3QgbWluSW5jcmVhc2VPbkxvc3MgPSAoMTAwIC8gKHJlc3VsdCAtIDEpKTsKICAgICAgICBjb25zdCB3aW5uaW5nQ2hhbmNlID0gKDk5IC8gcmVzdWx0KTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbXVsdGlwbGllcjogcmVzdWx0LAogICAgICAgICAgICBtaW5JbmNyZWFzZU9uTG9zczogbWluSW5jcmVhc2VPbkxvc3MsCiAgICAgICAgICAgIHdpbm5pbmdDaGFuY2U6IHdpbm5pbmdDaGFuY2UKICAgICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRCZXN0Q29tYmluYXRpb25Gb3JNdWx0aXBsaWVyKHRhcmdldE11bHRpcGxpZXIpIHsKICAgICAgICBjb25zdCB0b3RhbENlbGxzID0gMjU7CiAgICAgICAgbGV0IGJlc3RDb21iaW5hdGlvbiA9IHsgbWluZXM6IDAsIGRpYW1vbmRzOiAwLCBtdWx0aXBsaWVyOiBJbmZpbml0eSB9OwoKICAgICAgICBmb3IgKGxldCBtaW5lcyA9IDE7IG1pbmVzIDwgdG90YWxDZWxsczsgbWluZXMrKykgewogICAgICAgICAgICBmb3IgKGxldCBkaWFtb25kcyA9IDE7IGRpYW1vbmRzIDw9IHRvdGFsQ2VsbHMgLSBtaW5lczsgZGlhbW9uZHMrKykgewogICAgICAgICAgICAgICAgY29uc3QgeyBtdWx0aXBsaWVyIH0gPSBjYWxjdWxhdGVSZXN1bHRzKG1pbmVzLCBkaWFtb25kcyk7CiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobXVsdGlwbGllciAtIHRhcmdldE11bHRpcGxpZXIpIDwgTWF0aC5hYnMoYmVzdENvbWJpbmF0aW9uLm11bHRpcGxpZXIgLSB0YXJnZXRNdWx0aXBsaWVyKSkgewogICAgICAgICAgICAgICAgICAgIGJlc3RDb21iaW5hdGlvbiA9IHsgbWluZXMsIGRpYW1vbmRzLCBtdWx0aXBsaWVyIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJlc3RDb21iaW5hdGlvbjsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVXaW5BbW91bnQobXVsdGlwbGllcikgewogICAgICAgIGNvbnN0IGJldFNpemUgPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZXRTaXplJykudmFsdWUpIHx8IDA7CiAgICAgICAgcmV0dXJuIGJldFNpemUgKiBtdWx0aXBsaWVyOwogICAgfQoKICAgIC8vIFRvZ2dsZSBmbGFnIHRvIGFsdGVybmF0ZSBiZXR3ZWVuIG1pbmVzIGFuZCBkaWFtb25kcwogICAgbGV0IHRvZ2dsZU1pbmVzRGlhbW9uZHMgPSB0cnVlOwoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlUGF0dGVybkJhc2VkT25NdWx0aXBsaWVyKCkgewogICAgICAgIGNvbnN0IG11bHRpcGxpZXJJbnB1dCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ211bHRpcGxpZXInKS52YWx1ZSk7CiAgICAgICAgaWYgKGlzTmFOKG11bHRpcGxpZXJJbnB1dCkgfHwgbXVsdGlwbGllcklucHV0IDwgMSkgewogICAgICAgICAgICBhbGVydCgiUGxlYXNlIGVudGVyIGEgdmFsaWQgbXVsdGlwbGllciBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMS4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgeyBtaW5lcywgZGlhbW9uZHMsIG11bHRpcGxpZXIgfSA9IGZpbmRCZXN0Q29tYmluYXRpb25Gb3JNdWx0aXBsaWVyKG11bHRpcGxpZXJJbnB1dCk7CgogICAgICAgIC8vIEFsdGVybmF0ZSBiZXR3ZWVuIGFzc2lnbmluZyB0aGUgaGlnaGVyIHZhbHVlIHRvIG1pbmVzIG9yIGRpYW1vbmRzCiAgICAgICAgY29uc3QgaGlnaGVyID0gTWF0aC5tYXgobWluZXMsIGRpYW1vbmRzKTsKICAgICAgICBjb25zdCBsb3dlciA9IE1hdGgubWluKG1pbmVzLCBkaWFtb25kcyk7CiAgICAgICAgY29uc3QgYWRqdXN0ZWRNaW5lcyA9IHRvZ2dsZU1pbmVzRGlhbW9uZHMgPyBoaWdoZXIgOiBsb3dlcjsKICAgICAgICBjb25zdCBhZGp1c3RlZERpYW1vbmRzID0gdG9nZ2xlTWluZXNEaWFtb25kcyA/IGxvd2VyIDogaGlnaGVyOwoKICAgICAgICB0b2dnbGVNaW5lc0RpYW1vbmRzID0gIXRvZ2dsZU1pbmVzRGlhbW9uZHM7IC8vIFRvZ2dsZSBmb3IgdGhlIG5leHQgY2xpY2sKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmVzJykudmFsdWUgPSBhZGp1c3RlZE1pbmVzOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWFtb25kcycpLnZhbHVlID0gYWRqdXN0ZWREaWFtb25kczsKCiAgICAgICAgY29uc3QgdG90YWxDZWxscyA9IDI1OwogICAgICAgIGNvbnN0IGNlbGxzID0gQXJyYXkodG90YWxDZWxscykuZmlsbCgnJyk7CiAgICAgICAgbGV0IGluZGljZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0b3RhbENlbGxzIH0sICh2LCBpKSA9PiBpKTsKICAgICAgICBpbmRpY2VzID0gaW5kaWNlcy5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkanVzdGVkTWluZXM7IGkrKykgewogICAgICAgICAgICBjZWxsc1tpbmRpY2VzW2ldXSA9ICdtaW5lJzsKICAgICAgICB9CiAgICAgICAgZm9yIChsZXQgaSA9IGFkanVzdGVkTWluZXM7IGkgPCBhZGp1c3RlZE1pbmVzICsgYWRqdXN0ZWREaWFtb25kczsgaSsrKSB7CiAgICAgICAgICAgIGNlbGxzW2luZGljZXNbaV1dID0gJ2RpYW1vbmQnOwogICAgICAgIH0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsQ2VsbHM7IGkrKykgewogICAgICAgICAgICBpZiAoY2VsbHNbaV0gPT09ICcnKSB7CiAgICAgICAgICAgICAgICBjZWxsc1tpXSA9ICdkZWZhdWx0RGlhbW9uZCc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmVzQm9hcmQnKTsKICAgICAgICBib2FyZC5pbm5lckhUTUwgPSAnJzsKICAgICAgICBib2FyZC5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnOwogICAgICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNlbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgY2VsbERpdi5jbGFzc05hbWUgPSAnY2VsbCAnICsgY2VsbDsKICAgICAgICAgICAgYm9hcmQuYXBwZW5kQ2hpbGQoY2VsbERpdik7CiAgICAgICAgfSk7CgogICAgICAgIC8vIFVwZGF0ZSBib3RoIHBhdHRlcm4gYW5kIGJvYXJkIG11bHRpcGxpZXIKICAgICAgICB3aW5kb3cucGF0dGVybk11bHRpcGxpZXIgPSBtdWx0aXBsaWVyOwogICAgICAgIHdpbmRvdy5taW5lc0JvYXJkTXVsdGlwbGllciA9IG11bHRpcGxpZXI7CgogICAgICAgIGNvbnN0IHdpbkFtb3VudCA9IGNhbGN1bGF0ZVdpbkFtb3VudChtdWx0aXBsaWVyKTsKICAgICAgICBjb25zdCByZXN1bHRzID0gYAogICAgICAgICAgICA8c3Ryb25nPiR7bXVsdGlwbGllci50b0ZpeGVkKDEpfXg8L3N0cm9uZz48YnI+CiAgICAgICAgICAgIDxzdHJvbmc+V2luIEFtb3VudDo8L3N0cm9uZz4gPHNwYW4gaWQ9IndpbkFtb3VudERpc3BsYXkiPiQke3dpbkFtb3VudC50b0ZpeGVkKDIpfTwvc3Bhbj48YnI+CiAgICAgICAgICAgIDxzdHJvbmc+V2lubmluZyBDaGFuY2U6PC9zdHJvbmc+IDxzcGFuPiR7KGNhbGN1bGF0ZVJlc3VsdHMoYWRqdXN0ZWRNaW5lcywgYWRqdXN0ZWREaWFtb25kcykud2lubmluZ0NoYW5jZSkudG9GaXhlZCg2KX0lPC9zcGFuPjxicj4KICAgICAgICAgICAgPHN0cm9uZz5NaW5pbWFsIGluY3JlYXNlIG9uIGxvc3M6PC9zdHJvbmc+IDxzcGFuPngkeyhjYWxjdWxhdGVSZXN1bHRzKGFkanVzdGVkTWluZXMsIGFkanVzdGVkRGlhbW9uZHMpLm1pbkluY3JlYXNlT25Mb3NzKS50b0ZpeGVkKDMpfTwvc3Bhbj4KICAgICAgICBgOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5lc1Jlc3VsdHMnKS5pbm5lckhUTUwgPSByZXN1bHRzOwoKICAgICAgICB1cGRhdGVXaW5BbW91bnREaXNwbGF5KCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2VuZXJhdGVNaW5lc0JvYXJkKCkgewogICAgICAgIGNvbnN0IG1pbmVzID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmVzJykudmFsdWUpOwogICAgICAgIGNvbnN0IGRpYW1vbmRzID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpYW1vbmRzJykudmFsdWUpOwoKICAgICAgICBpZiAoIW1pbmVzIHx8ICFkaWFtb25kcykgewogICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYAogICAgICAgICAgICBDSE9PU0UgQU1PVU5UIE9GIE1JTkVTIEFORCBESUFNT05EUyBJRElPVAogICAgICAgICAgICBgOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluZXNSZXN1bHRzJykuaW5uZXJIVE1MID0gcmVzdWx0czsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgdG90YWxDZWxscyA9IDI1OwogICAgICAgIGNvbnN0IGNlbGxzID0gQXJyYXkodG90YWxDZWxscykuZmlsbCgnJyk7CgogICAgICAgIGlmIChtaW5lcyArIGRpYW1vbmRzID4gdG90YWxDZWxscykgewogICAgICAgICAgICBhbGVydCgnVG9vIG1hbnkgbWluZXMgYW5kIGRpYW1vbmRzIScpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBsZXQgaW5kaWNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHRvdGFsQ2VsbHMgfSwgKHYsIGkpID0+IGkpOwogICAgICAgIGluZGljZXMgPSBpbmRpY2VzLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWluZXM7IGkrKykgewogICAgICAgICAgICBjZWxsc1tpbmRpY2VzW2ldXSA9ICdtaW5lJzsKICAgICAgICB9CgogICAgICAgIGZvciAobGV0IGkgPSBtaW5lczsgaSA8IG1pbmVzICsgZGlhbW9uZHM7IGkrKykgewogICAgICAgICAgICBjZWxsc1tpbmRpY2VzW2ldXSA9ICdkaWFtb25kJzsKICAgICAgICB9CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxDZWxsczsgaSsrKSB7CiAgICAgICAgICAgIGlmIChjZWxsc1tpXSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGNlbGxzW2ldID0gJ2RlZmF1bHREaWFtb25kJzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluZXNCb2FyZCcpOwogICAgICAgIGJvYXJkLmlubmVySFRNTCA9ICcnOwogICAgICAgIGJvYXJkLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7CiAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHsKICAgICAgICAgICAgY29uc3QgY2VsbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBjZWxsRGl2LmNsYXNzTmFtZSA9ICdjZWxsICcgKyBjZWxsOwogICAgICAgICAgICBib2FyZC5hcHBlbmRDaGlsZChjZWxsRGl2KTsKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgeyBtdWx0aXBsaWVyLCBtaW5JbmNyZWFzZU9uTG9zcywgd2lubmluZ0NoYW5jZSB9ID0gY2FsY3VsYXRlUmVzdWx0cyhtaW5lcywgZGlhbW9uZHMpOwoKICAgICAgICB3aW5kb3cubWluZXNCb2FyZE11bHRpcGxpZXIgPSBtdWx0aXBsaWVyOwogICAgICAgIHdpbmRvdy5wYXR0ZXJuTXVsdGlwbGllciA9IG11bHRpcGxpZXI7CgogICAgICAgIGNvbnN0IHdpbkFtb3VudCA9IGNhbGN1bGF0ZVdpbkFtb3VudChtdWx0aXBsaWVyKTsKICAgICAgICBjb25zdCByZXN1bHRzID0gYAogICAgICAgICAgICA8c3Ryb25nPiR7bXVsdGlwbGllci50b0ZpeGVkKDIpfXg8L3N0cm9uZz48YnI+CiAgICAgICAgICAgIDxzdHJvbmc+V2luIEFtb3VudDo8L3N0cm9uZz4gPHNwYW4gaWQ9IndpbkFtb3VudERpc3BsYXkiPiQke3dpbkFtb3VudC50b0ZpeGVkKDIpfTwvc3Bhbj48YnI+CiAgICAgICAgICAgIDxzdHJvbmc+V2lubmluZyBDaGFuY2U6PC9zdHJvbmc+IDxzcGFuPiR7d2lubmluZ0NoYW5jZS50b0ZpeGVkKDYpfSU8L3NwYW4+PGJyPgogICAgICAgICAgICA8c3Ryb25nPk1pbmltYWwgaW5jcmVhc2Ugb24gbG9zczo8L3N0cm9uZz4gPHNwYW4+eCR7bWluSW5jcmVhc2VPbkxvc3MudG9GaXhlZCg1KX08L3NwYW4+CiAgICAgICAgYDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluZXNSZXN1bHRzJykuaW5uZXJIVE1MID0gcmVzdWx0czsKCiAgICAgICAgdXBkYXRlV2luQW1vdW50RGlzcGxheSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvdWJsZUJldCgpIHsKICAgICAgICBjb25zdCBiZXRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZXRTaXplJyk7CiAgICAgICAgbGV0IGN1cnJlbnRCZXQgPSBwYXJzZUZsb2F0KGJldElucHV0LnZhbHVlKTsKICAgICAgICBjdXJyZW50QmV0ID0gY3VycmVudEJldCAqIDI7CiAgICAgICAgYmV0SW5wdXQudmFsdWUgPSBjdXJyZW50QmV0IDwgMSA/IGN1cnJlbnRCZXQudG9GaXhlZCg0KSA6IGN1cnJlbnRCZXQudG9GaXhlZCgyKTsKICAgICAgICB1cGRhdGVXaW5BbW91bnREaXNwbGF5KCk7CiAgICB9CgogICAgZnVuY3Rpb24gaGFsdmVCZXQoKSB7CiAgICAgICAgY29uc3QgYmV0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmV0U2l6ZScpOwogICAgICAgIGxldCBjdXJyZW50QmV0ID0gcGFyc2VGbG9hdChiZXRJbnB1dC52YWx1ZSk7CiAgICAgICAgY3VycmVudEJldCA9IGN1cnJlbnRCZXQgLyAyOwogICAgICAgIGJldElucHV0LnZhbHVlID0gY3VycmVudEJldCA8IDEgPyBjdXJyZW50QmV0LnRvRml4ZWQoNCkgOiBjdXJyZW50QmV0LnRvRml4ZWQoMik7CiAgICAgICAgdXBkYXRlV2luQW1vdW50RGlzcGxheSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJhbmRvbWl6ZU1pbmVzQW5kRGlhbW9uZHMoKSB7CiAgICAgICAgY29uc3QgdG90YWxDZWxscyA9IDI1OwoKICAgICAgICBsZXQgbWluZXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNCkgKyAxOwogICAgICAgIGxldCBkaWFtb25kcyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0b3RhbENlbGxzIC0gbWluZXMpKSArIDE7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5lcycpLnZhbHVlID0gbWluZXM7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpYW1vbmRzJykudmFsdWUgPSBkaWFtb25kczsKCiAgICAgICAgZ2VuZXJhdGVNaW5lc0JvYXJkKCk7CiAgICAgICAgdXBkYXRlV2luQW1vdW50RGlzcGxheSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVdpbkFtb3VudERpc3BsYXkoKSB7CiAgICAgICAgY29uc3QgYmV0U2l6ZSA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JldFNpemUnKS52YWx1ZSkgfHwgMDsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gd2luZG93Lm1pbmVzQm9hcmRNdWx0aXBsaWVyIHx8IHdpbmRvdy5wYXR0ZXJuTXVsdGlwbGllciB8fCAxOwogICAgICAgIGNvbnN0IHdpbkFtb3VudCA9IGJldFNpemUgKiBtdWx0aXBsaWVyOwogICAgICAgIGNvbnN0IHdpbkFtb3VudEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luQW1vdW50RGlzcGxheScpOwogICAgICAgIGlmICh3aW5BbW91bnRFbGVtZW50KSB7CiAgICAgICAgICAgIHdpbkFtb3VudEVsZW1lbnQudGV4dENvbnRlbnQgPSBgJCR7d2luQW1vdW50LnRvRml4ZWQoMil9YDsKICAgICAgICB9CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gY2hlY2tJZkxpdmUoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9raWNrLmNvbS9hcGkvdjEvY2hhbm5lbHMvZW5qYXl5Jyk7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjb25zdCBpc0xpdmUgPSBkYXRhLmxpdmVzdHJlYW0gJiYgZGF0YS5saXZlc3RyZWFtLmlzX2xpdmU7CiAgICAgICAgICAgIGNvbnN0IHN0YXR1c1RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGl2ZS1zdGF0dXMtdGV4dCcpOwoKICAgICAgICAgICAgaWYgKGlzTGl2ZSkgewogICAgICAgICAgICAgICAgc3RhdHVzVGV4dC5zdHlsZS5jb2xvciA9ICdncmVlbic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0LnN0eWxlLmNvbG9yID0gJ3JlZCc7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBsaXZlIHN0YXR1czonLCBlcnJvcik7CiAgICAgICAgfQogICAgfQoKICAgIHNldEludGVydmFsKGNoZWNrSWZMaXZlLCAxMDAwMCk7ICAvLyBDaGVjayBsaXZlIHN0YXR1cyBldmVyeSAxMCBzZWNvbmRzCgogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JldFNpemUnKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZVdpbkFtb3VudERpc3BsYXkpOwo8L3NjcmlwdD4KCjwvYm9keT4KPC9odG1sPgo='));
</script>
